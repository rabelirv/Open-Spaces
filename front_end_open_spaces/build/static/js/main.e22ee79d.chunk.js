(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,a){e.exports=a(170)},108:function(e,t,a){},109:function(e,t,a){},141:function(e,t){},157:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=a(17),s=(a(108),a(39)),l=a(18),u=a(13),p=a(21),m=a(19),f=a(22),d=(a(109),a(57)),g=a(204),h=a(171),b=a(215),v=a(207),E=a(206),k=a(93),S=a.n(k),O=a(94),j=a.n(O),y=a(95),w=a.n(y),N=Object(g.a)({root:{padding:"2px 4px",display:"flex",alignItems:"center",width:400},input:{marginLeft:8,flex:1},iconButton:{padding:10},divider:{width:1,height:28,margin:4}});function P(e){var t=Object(n.useState)(" "),a=Object(d.a)(t,2),o=a[0],c=a[1],i=N();return r.a.createElement(h.a,{className:i.root},r.a.createElement(E.a,{className:i.iconButton,"aria-label":"menu"},r.a.createElement(S.a,null)),r.a.createElement(b.a,{className:i.input,placeholder:"Search Google Maps",inputProps:{"aria-label":"search google maps"},onChange:function(e){return c(e.target.value)}}),r.a.createElement(E.a,{className:i.iconButton,"aria-label":"search"},r.a.createElement(j.a,null)),r.a.createElement(v.a,{className:i.divider}),r.a.createElement(E.a,{onClick:function(){return e.findParking(o)},color:"primary",className:i.iconButton,"aria-label":"directions"},r.a.createElement(w.a,null)))}var x=a(41),C=a.n(x),A=a(96),R=a.n(A),I={api:"https://open-spaces-websockets.herokuapp.com/"},L=a(14),U=a.n(L),W=a(33);C.a.setApiKey("AIzaSyDS7fqSLY5L2xuXAb8cIb1vyQRKt5EPXmw");var z=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(p.a)(this,Object(m.a)(t).call(this))).socket={},e.addAddress=function(t){e.setState({addresses:[].concat(Object(s.a)(e.state.addresses),[t])})},e.promptUser=function(){U.a.create({title:null,content:"A User is requesting a Parking Spot! Do you accept?",buttons:{left:[{text:"Cancel",className:"danger",action:function(){U.a.alert("You pressed the Cancel btn"),U.a.close()}}],right:[{text:"Post Parking Spot",key:"ctrl+enter",action:function(){e.props.history.push("/parkingform"),U.a.create({title:null,content:"We are waiting for the Rentee to confirm!",buttons:{left:["cancel"],right:[]}},!0)}},{text:"Save",className:"success",action:function(){U.a.alert("You pressed the Save btn"),U.a.close()}}]}})},e.confirmParkingSpot=function(t){U.a.create({title:null,content:"A Rentor has accepted your request with a parking spot at this location: ".concat(t,", is this ok?"),buttons:{left:[{text:"Cancel",className:"danger",action:function(){U.a.alert("You pressed the Cancel btn"),U.a.close()}}],right:[{text:"Yes!",key:"ctrl+enter",action:function(){e.props.history.push("/map"),C.a.fromAddress(t).then(function(t){var a,n=t.results[0].geometry.location,r=n.lat,o=n.lng;a={lat:r,lng:o},e.props.getParkingSpot(a)},function(e){console.error(e)}),U.a.create({title:null,content:"Here is your parking spot!",buttons:{left:["cancel"],right:[]}},!0)}},{text:"Done",className:"success",action:function(){U.a.alert("Done"),U.a.close()}}]}})},e.findParking=function(t){console.log("findparkin",e.socket),C.a.fromAddress(t).then(function(t){var a=t.results[0].geometry.location;console.log("locationObject",a),e.addAddress(a),a.fromRentee=!0,e.socket.emit("client:message",a)},function(e){console.error(e)})},e.state={addresses:[]},e.socket=R()(I.api).connect(),e.socket.on("server:message",function(t){console.log("server:message",t),t.fromRentee?e.promptUser():void 0!==t.address&&t.fromRentor&&e.confirmParkingSpot(t.address)}),e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.getSocket(this.socket)}},{key:"render",value:function(){return console.log(this.state.addresses),r.a.createElement("div",{className:"home-container"},r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__logo-box"}),r.a.createElement("div",{className:"header__text-box"},r.a.createElement("h1",{className:"heading-primary"},r.a.createElement("span",{className:"heading-primary--main"},"Open Spaces"),r.a.createElement("span",{className:"heading-primary--sub"},"Find Parking")),r.a.createElement(P,{findParking:this.findParking})),r.a.createElement("br",null)))}}]),t}(r.a.Component),D=Object(W.f)(z),M=(a(157),function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navbar"},this.props.user?r.a.createElement("div",null,r.a.createElement(i.b,{to:"/",className:"navbu",onClick:this.props.logOut},"LOG OUT"),r.a.createElement(i.b,{to:"/profile",className:"navbu"},"PROFILE"),r.a.createElement(i.b,{to:"/",className:"navbu"},"HOME")):r.a.createElement("div",null,r.a.createElement(i.b,{to:"/signup",className:"navbu"},"SIGN UP"),r.a.createElement(i.b,{to:"/map",className:"navbu"},"MAP"),r.a.createElement(i.b,{to:"/parkingform",className:"navbu"},"Post a Parking Spot!"),r.a.createElement(i.b,{to:"/",className:"navbu"},"HOME")))}}]),t}(r.a.Component)),T=a(37),B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",bio:"",avatar:""},a.handleChange=function(e){a.setState(Object(T.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),a.props.createNewUser(a.state)},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form"},r.a.createElement("h1",null,"Sign Up "),r.a.createElement("form",{onChange:function(t){return e.handleChange(t)},onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{autoComplete:"off",type:"text",name:"username"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{autoComplete:"off",type:"password",name:"password"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{autoComplete:"off",type:"text",name:"bio"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{autoComplete:"off",type:"text",name:"avatar"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{autoComplete:"off",type:"submit",value:"Submit"})))}}]),t}(r.a.Component),Y=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"under"},this.props.user?r.a.createElement("div",null,r.a.createElement("h1",null,"Hello Profile ",this.props.user.username,"!"),r.a.createElement("img",{alt:"avatar",src:this.props.user.avatar})):r.a.createElement(W.a,{to:"/"}))}}]),t}(r.a.Component),G=a(45),K=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.parkingSpots.map(function(e){return r.a.createElement(G.Marker,{position:{lat:e.lat,lng:e.lng}})});return r.a.createElement("div",{style:{height:"100vh",width:"100%"}},r.a.createElement(G.Map,{google:this.props.google,initialCenter:this.props.center,zoom:this.props.zoom},r.a.createElement(G.Marker,{position:{lat:59.955413,lng:30.337844}}),e))}}]),t}(r.a.Component);K.defaultProps={center:{lat:40.73,lng:-73.93},zoom:14};var X=Object(G.GoogleApiWrapper)({apiKey:"AIzaSyDS7fqSLY5L2xuXAb8cIb1vyQRKt5EPXmw"})(K),_=a(98),q=a(208),F=a(209),H=a(212),J=a(211),Q=a(210),$=a(213),V=a(214);C.a.setApiKey("AIzaSyDS7fqSLY5L2xuXAb8cIb1vyQRKt5EPXmw");var Z=Object(g.a)(function(e){return{card:{maxWidth:345},media:{height:140},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}});function ee(e){var t,a=Z(),n=r.a.useState({address:""}),o=Object(d.a)(n,2),c=o[0],i=o[1];return r.a.createElement(q.a,{className:a.card},r.a.createElement(F.a,null,r.a.createElement(Q.a,{className:a.media,image:"../assets/parking_form_pic.jpeg",title:"Contemplative Reptile"}),r.a.createElement(J.a,null,r.a.createElement("form",null,console.log(e.socket),r.a.createElement(V.a,{id:"outlined-name",label:"Address",className:a.textField,value:c.address,onChange:(t="address",function(e){i(Object(_.a)({},c,Object(T.a)({},t,e.target.value)))}),margin:"normal",variant:"outlined"})))),r.a.createElement(H.a,null,r.a.createElement($.a,{onClick:function(){return function(t){var a={address:t,fromRentor:!0};e.socket.emit("client:message",a)}(c.address)},size:"small",color:"primary"},"Find Parking!"),r.a.createElement($.a,{onClick:function(){navigator.geolocation.getCurrentPosition(function(e){return console.log(e)})},size:"small",color:"primary"},"Get Current Position!")))}var te=a(99),ae=a.n(te),ne=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(p.a)(this,Object(m.a)(t).call(this))).getParkingSpot=function(t){console.log("Parking Spot",t),e.setState({parkingSpots:[].concat(Object(s.a)(e.state.parkingSpots),[t])})},e.getSocket=function(t){console.log("In App",t),e.setState({socket:t})},e.logOut=function(){if(!localStorage.getItem("token"))return null;localStorage.removeItem("token"),e.setState({user:null})},e.createNewUser=function(t){fetch("https://open-spaces-api.herokuapp.com/api/v1/users",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user:t})}).then(function(e){return e.json()}).then(function(t){localStorage.setItem("token",t.jwt),e.setState({user:t.user}),e.getProfile(t.jwt)}).then(function(e){return r.a.createElement(W.a,{to:"/"})}).catch(function(e){return console.log(e)})},e.logIn=function(t){fetch("https://open-spaces-api.herokuapp.com/api/v1/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({user:t})}).then(function(e){return e.json()}).then(function(t){localStorage.setItem("token",t.jwt),e.setState({user:t.user}),e.getProfile(t.jwt)}).catch(function(e){return console.log(e)})},e.getProfile=function(t){fetch("https://open-spaces-api.herokuapp.com/api/v1/profile",{method:"GET",headers:{Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).then(function(t){return e.setState({user:t.user})})},e.state={user:null,parkingSpots:[],currentLocation:{lat:40.73,lng:-73.93},isRentor:!1,socket:{}},e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition(function(t){return e.setState({lat:t.coords.latitude,lng:t.coords.longitude})})}},{key:"render",value:function(){var e=this;return console.log(this.state.socket),r.a.createElement("div",{className:"app-container"},r.a.createElement(ae.a,null,r.a.createElement(M,{user:this.state.user,logOut:this.logOut}),r.a.createElement(U.a,null),r.a.createElement(W.d,null,r.a.createElement(W.b,{exact:"exact",path:"/",render:function(){return r.a.createElement(D,{getParkingSpot:e.getParkingSpot,isRentor:e.state.isRentor,getSocket:e.getSocket})}}),r.a.createElement(W.b,{exact:"exact",path:"/parkingform",render:function(){return r.a.createElement(ee,{getParkingSpot:e.getParkingSpot,socket:e.state.socket})}}),r.a.createElement(W.b,{exact:"exact",path:"/map",render:function(){return r.a.createElement(X,{parkingSpots:e.state.parkingSpots})}}),r.a.createElement(W.b,{exact:"exact",path:"/signup",render:function(){return r.a.createElement(B,{createNewUser:e.createNewUser})}}),r.a.createElement(W.b,{exact:"exact",path:"/profile",render:function(){return r.a.createElement(Y,{user:e.state.user})}}))))}}]),t}(r.a.Component),re=Object(W.f)(ne),oe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(i.a,null,r.a.createElement(re,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");oe?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ce(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ce(t,e)})}}()}},[[103,1,2]]]);
//# sourceMappingURL=main.e22ee79d.chunk.js.map